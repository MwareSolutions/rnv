{"version":3,"sources":["../src/config.js"],"names":["CLI_PROPS","Config","config","c","dependency","version","type","skipInstall","currentPackage","files","project","package","existingPath","paths","pkg","skipAsking","projectConfig","getProjectConfig","confirm","message","resp","latestVersion","injectProjectDependency","currentVersion","updateAvailable","semver","lt","e","platform","npmDeps","rnv","platformTemplates","platforms","npm","promises","Object","keys","reduce","acc","forEach","dep","push","checkRequiredPackage","Promise","all","installed","some","i","key","global","fs","existsSync","cfg","require","GLOBAL_RNV_CONFIG","value","configSchema","undefined","buildConfig","default","localVal","getConfigValueSeparate","toString","globalVal","table","Key","keySchema","values","includes","join","program","isConfigValueValid","configPath","resultCli","resultScheme","resultPlatforms","resultCommon","Array","isArray","val","defaultVal","p","ps","runtime","scheme","buildSchemes","common","result","getValueOrMergedObject","chalk","grey","command","subCommand","args","rawArgs","argsCopy","missingArg","indexOf","length","filter","arg","configExists","hosted","bundleAssets","getConfigProp","WEB_HOSTED_PLATFORMS","getMergedConfigValue","dir","Conf","rnvConfigHandler","rnvArguments","rows","k","listConfigValue","concat","setConfigValue"],"mappings":"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","sourcesContent":["/* eslint-disable global-require, import/no-dynamic-require, valid-typeof */\nimport { printTable } from 'console-table-printer';\nimport fs from 'fs';\nimport chalk from 'chalk';\nimport semver from 'semver';\n\nimport { writeFileSync } from './systemTools/fileutils';\nimport { npmInstall, executeAsync } from './systemTools/exec';\nimport { logWarning, logTask, logError } from './systemTools/logger';\nimport { inquirerPrompt } from './systemTools/prompt';\nimport { configSchema, WEB_HOSTED_PLATFORMS } from './constants';\n\nexport const CLI_PROPS = [\n    'provisioningStyle',\n    'codeSignIdentity',\n    'provisionProfileSpecifier'\n];\n\nclass Config {\n    constructor() {\n        this.config = {};\n    }\n\n    // async initializeConfig(cmd, subCmd, program) {\n    //     this.config = await initializeBuilder(cmd, subCmd, process, program);\n    // }\n\n    initializeConfig(c) {\n        this.config = c;\n        return c;\n    }\n\n    getConfig() {\n        return this.config;\n    }\n\n    get command() {\n        return this.config.command;\n    }\n\n    get subCommand() {\n        return this.config.subCommand;\n    }\n\n    get rnvArguments() {\n        // commander is stupid https://github.com/tj/commander.js/issues/53\n        const { args, rawArgs } = this.config.program;\n        const argsCopy = [...args];\n        let missingArg = rawArgs[rawArgs.indexOf(argsCopy[1]) + 1];\n        if (missingArg?.[0] === '-') {\n            if (rawArgs[rawArgs.indexOf(argsCopy[1]) + 2]) {\n                missingArg = rawArgs[rawArgs.indexOf(argsCopy[1]) + 2];\n            } else {\n                missingArg = undefined;\n            }\n        }\n        if (rawArgs.length === 3) missingArg = undefined;\n        argsCopy[2] = missingArg;\n        return argsCopy.filter(arg => !!arg);\n    }\n\n    async injectProjectDependency(dependency, version, type, skipInstall = false) {\n        const currentPackage = this.config.files.project.package;\n        const existingPath = this.config.paths.project.package;\n        if (!currentPackage[type]) currentPackage[type] = {};\n        currentPackage[type][dependency] = version;\n        writeFileSync(existingPath, currentPackage);\n        if (!skipInstall) await npmInstall();\n        return true;\n    }\n\n    getProjectConfig() {\n        return this.config.files.project;\n    }\n\n    async checkRequiredPackage(pkg, version = false, type, skipAsking = false, skipInstall = false) {\n        if (!pkg) return false;\n        const projectConfig = this.getProjectConfig();\n\n        if (!projectConfig.package[type]?.[pkg]) {\n            // package does not exist, adding it\n            let confirm = skipAsking;\n            if (!confirm) {\n                const resp = await inquirerPrompt({\n                    type: 'confirm',\n                    message: `You do not have ${pkg} installed. Do you want to add it now?`\n                });\n                // eslint-disable-next-line prefer-destructuring\n                confirm = resp.confirm;\n            }\n\n            if (confirm) {\n                let latestVersion = 'latest';\n                if (!version) {\n                    try {\n                        latestVersion = await executeAsync(`npm show ${pkg} version`);\n                        // eslint-disable-next-line no-empty\n                    } catch (e) {}\n                }\n                return this.injectProjectDependency(pkg, version || latestVersion, type, skipInstall);\n            }\n        } else if (!version) {\n            // package exists, checking version only if version is not\n            const currentVersion = projectConfig.package[type][pkg];\n            let latestVersion = false;\n            try {\n                latestVersion = await executeAsync(`npm show ${pkg} version`);\n                // eslint-disable-next-line no-empty\n            } catch (e) {}\n            if (latestVersion) {\n                let updateAvailable = false;\n\n                try {\n                    // semver might fail if you have a path instead of a version (like when you are developing)\n                    updateAvailable = semver.lt(currentVersion, latestVersion);\n                    // eslint-disable-next-line no-empty\n                } catch (e) {}\n\n                if (updateAvailable) {\n                    let confirm = skipAsking;\n                    if (!confirm) {\n                        const resp = await inquirerPrompt({\n                            type: 'confirm',\n                            message: `Seems like ${pkg}@${currentVersion} is installed while there is a newer version, ${pkg}@${latestVersion}. Do you want to upgrade?`\n                        });\n                        // eslint-disable-next-line prefer-destructuring\n                        confirm = resp.confirm;\n                    }\n\n                    if (confirm) {\n                        return this.injectProjectDependency(pkg, latestVersion, type, skipInstall);\n                    }\n                }\n            }\n        }\n\n        return false;\n    }\n\n    async injectPlatformDependencies(platform) {\n        const npmDeps = this.config.files?.rnv?.platformTemplates?.config?.platforms?.[platform]?.npm;\n\n        if (npmDeps) {\n            const promises = Object.keys(npmDeps).reduce((acc, type) => { // iterate over dependencies, devDepencencies or optionalDependencies\n                Object.keys(npmDeps[type]).forEach((dep) => { // iterate over deps\n                    acc.push(this.checkRequiredPackage(dep, npmDeps[type][dep], type, true, true));\n                });\n                return acc;\n            }, []);\n\n            const installed = await Promise.all(promises);\n\n            if (installed.some(i => i === true)) { // do npm i only if something new is added\n                await npmInstall();\n            }\n        }\n\n        // add other deps that are not npm\n    }\n\n    get platform() {\n        return this.config.platform;\n    }\n\n    get isRenativeProject() {\n        return this.config?.paths?.project?.configExists || false;\n    }\n\n    get program() {\n        return this.config.program;\n    }\n\n    get paths() {\n        return this.config.paths;\n    }\n\n    // RNV CONFIG\n    getConfigValueSeparate(key, global = false) {\n        const { paths } = this.config;\n\n        if (!global && !fs.existsSync(paths.project.config)) return 'N/A'; // string because there might be a setting where we will use null\n        const cfg = global ? require(paths.GLOBAL_RNV_CONFIG) : require(paths.project.config);\n\n        const value = cfg[configSchema[key].key];\n        if (value === undefined) return 'N/A';\n\n        return value;\n    }\n\n    getMergedConfigValue(key) {\n        let value = this.config.buildConfig?.[configSchema[key].key];\n        if (value === undefined && configSchema[key].default) value = configSchema[key].default;\n        return value;\n    }\n\n    listConfigValue(key) {\n        let localVal = this.getConfigValueSeparate(key).toString();\n        let globalVal = this.getConfigValueSeparate(key, true).toString();\n\n        if (globalVal === 'N/A' && configSchema[key].default) globalVal = configSchema[key].default;\n        if (localVal === 'N/A') localVal = globalVal;\n\n        const table = [{\n            Key: key,\n            'Global Value': globalVal\n        }];\n\n\n        if (localVal !== 'N/A') {\n            table[0]['Project Value'] = localVal;\n        }\n\n        return table;\n    }\n\n    isConfigValueValid(key, value) {\n        const keySchema = configSchema[key];\n        if (!keySchema) {\n            logWarning(`Unknown config param ${key}`);\n            return false;\n        }\n\n        if (keySchema.values && !keySchema.values.includes(value)) {\n            logWarning(`Unsupported value provided for ${key}. Correct values are ${keySchema.values.join(', ')}`);\n            return false;\n        }\n\n        return true;\n    }\n\n    setConfigValue(key, value) {\n        const { program: { global }, paths } = this.config;\n\n        if (this.isConfigValueValid(key, value)) {\n            const configPath = global ? paths.GLOBAL_RNV_CONFIG : paths.project.config;\n            const config = require(configPath);\n\n            if (['true', 'false'].includes(value)) value = value === 'true'; // convert string to bool if it matches a bool value\n\n            config[configSchema[key].key] = value;\n            writeFileSync(configPath, config);\n            return true;\n        }\n        return false;\n    }\n\n    getValueOrMergedObject(resultCli, resultScheme, resultPlatforms, resultCommon) {\n        if (resultCli !== undefined) {\n            return resultCli;\n        }\n        if (resultScheme !== undefined) {\n            if (Array.isArray(resultScheme) || typeof resultScheme !== 'object') return resultScheme;\n            const val = Object.assign(resultCommon || {}, resultPlatforms || {}, resultScheme);\n            return val;\n        }\n        if (resultPlatforms !== undefined) {\n            if (Array.isArray(resultPlatforms) || typeof resultPlatforms !== 'object') return resultPlatforms;\n            return Object.assign(resultCommon || {}, resultPlatforms);\n        }\n        if (resultPlatforms === null) return null;\n        return resultCommon;\n    }\n\n\n    getConfigProp(c, platform, key, defaultVal) {\n        if (!c.buildConfig) {\n            logError('getConfigProp: c.buildConfig is undefined!');\n            return null;\n        }\n        const p = c.buildConfig.platforms[platform];\n        const ps = c.runtime.scheme;\n        let resultPlatforms;\n        let scheme;\n        if (p) {\n            scheme = p.buildSchemes ? p.buildSchemes[ps] : undefined;\n            resultPlatforms = c.buildConfig.platforms[platform][key];\n        }\n\n        scheme = scheme || {};\n        const resultCli = CLI_PROPS.includes(key) ? c.program[key] : undefined;\n        const resultScheme = scheme[key];\n        const resultCommon = c.buildConfig.common?.[key];\n\n        let result = this.getValueOrMergedObject(resultCli, resultScheme, resultPlatforms, resultCommon);\n\n        if (result === undefined) result = defaultVal; // default the value only if it's not specified in any of the files. i.e. undefined\n        logTask(`getConfigProp:${platform}:${key}:${result}`, chalk.grey);\n        return result;\n    }\n\n    get isWebHostEnabled() {\n        const { hosted } = this.config.program;\n        // if (debug) return false;\n        const bundleAssets = this.getConfigProp(this.config, this.platform, 'bundleAssets');\n        return (hosted || !bundleAssets) && WEB_HOSTED_PLATFORMS.includes(this.platform);\n    }\n\n    get isAnalyticsEnabled() {\n        return this.getMergedConfigValue('analytics');\n    }\n\n    get projectPath() {\n        return this.config.paths.project.dir;\n    }\n\n    //     getBuildConfig() {\n    //         return this.config.buildConfig;\n    //     }\n\n    //     updateLocalConfig() {\n    //         writeFileSync(file, newConfig);\n    //         this.initializeConfig();\n    //     }\n\n    //     updateGlobalonfig() {\n    //         writeFileSync(file, newConfig);\n    //         this.initializeConfig();\n    //     }\n\n    //     updateCLIPath() {\n    //         writeFileSync(file, newConfig);\n    //         this.initializeConfig();\n    //     }\n\n    //     getPath(path) { // getPath(RNV_PLUGINTEMPLATES_DIR) / PROJECT_BUILDS_DIR...\n    //         return this.config.paths[path];\n    //     }\n\n    //     get getInfo() {\n    //         return this.c.program.info;\n    //     }\n\n    //     get platform() {\n    //         return this.config.program.platform;\n    //     }\n\n    //     get mono() {\n    //         return this.config.program.mono;\n    //     }\n\n    //     get target() {}\n\n//     set target(newTarget) {\n//         this.config.target = newTarget;\n//         this.initializeConfig();\n//     }\n}\n\nconst Conf = new Config();\n// excluded from Config because for some reason passing this function to RNV as a handler makes it lose it's context\nconst rnvConfigHandler = () => {\n    const [, key, value] = Conf.rnvArguments; // first arg is config so it's useless\n    if (key === 'list') {\n        const rows = [];\n        Object.keys(configSchema).forEach(k => rows.push(Conf.listConfigValue(k)));\n\n        printTable([].concat(...rows));\n        return true;\n    }\n\n    // validate args\n    if (!key) { // @todo add inquirer with list of options\n        logWarning('Please specify a config');\n        return true;\n    }\n    if (!configSchema[key]) {\n        logWarning(`Unknown config ${key}`);\n        return true;\n    }\n\n    if (!value) {\n        // list the value\n        printTable(Conf.listConfigValue(key));\n    } else if (Conf.setConfigValue(key, value)) printTable(Conf.listConfigValue(key));\n\n    return true;\n};\n\nexport default Conf;\nexport { rnvConfigHandler };\n"],"file":"config.js"}