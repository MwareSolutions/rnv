{"version":3,"sources":["../../src/platformTools/runner.js"],"names":["keepRNVRunning","rnvStart","c","platform","port","runtime","hosted","program","Config","isWebHostEnabled","then","localhost","catch","logError","MACOS","WINDOWS","WEB","TIZEN","WEBOS","TIZEN_MOBILE","TIZEN_WATCH","startCmd","join","reset","stdio","silent","runWeinre","rnvDebug","rnvRun","_rnvRunWithPlatform","rnvPackage","_rnvPackageWithPlatform","rnvBuild","_rnvBuildWithPlatform","rnvExport","_rnvExportWithPlatform","rnvDeploy","_rnvDeployWithPlatform","rnvLog","ANDROID","ANDROID_TV","ANDROID_WEAR","IOS","TVOS","_configureHostedIfRequired","paths","project","rnv","path","dir","appId","pattern","override","ip","address","_startBundlerIfRequired","bundleAssets","isRunning","waitForBundlerIfRequired","Promise","target","chalk","grey","shouldOpenBrowser","Analytics","captureEvent","type","KAIOS","FIREFOX_OS","FIREFOX_TV","only","files","workspace","config","defaultTargets"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-cycle */\n// @todo fix circular\nimport chalk from 'chalk';\nimport open from 'better-opn';\nimport ip from 'ip';\nimport path from 'path';\n\nimport {\n    isBuildSchemeSupported,\n    logErrorPlatform,\n    configureIfRequired,\n    cleanPlatformIfRequired,\n    writeCleanFile,\n    getConfigProp,\n    waitForWebpack,\n    getSourceExts,\n    confirmActiveBundler\n} from '../common';\nimport { isPlatformSupported } from './index';\nimport {\n    logTask,\n    logError,\n    logDebug\n} from '../systemTools/logger';\nimport {\n    IOS,\n    TVOS,\n    ANDROID,\n    WEB,\n    TIZEN,\n    WEBOS,\n    ANDROID_TV,\n    ANDROID_WEAR,\n    MACOS,\n    WINDOWS,\n    TIZEN_MOBILE,\n    TIZEN_WATCH,\n    KAIOS,\n    FIREFOX_OS,\n    FIREFOX_TV,\n} from '../constants';\nimport {\n    runXcodeProject,\n    exportXcodeProject,\n    archiveXcodeProject,\n    packageBundleForXcode,\n    runAppleLog\n} from './apple';\nimport { buildWeb, runWeb, deployWeb, exportWeb } from './web';\nimport { runTizen, buildTizenProject } from './tizen';\nimport { runWebOS, buildWebOSProject } from './webos';\nimport { runFirefoxProject, buildFirefoxProject } from './firefox';\nimport {\n    runElectron,\n    buildElectron, runElectronDevServer, configureElectronProject, exportElectron\n} from './electron';\nimport {\n    packageAndroid,\n    runAndroid,\n    configureGradleProject,\n    buildAndroid,\n    runAndroidLog\n} from './android';\nimport { copyFolderContentsRecursiveSync } from '../systemTools/fileutils';\nimport { executeAsync } from '../systemTools/exec';\nimport { isBundlerActive, waitForBundler } from './bundler';\nimport { checkSdk } from './sdkManager';\nimport Config from '../config';\nimport Analytics from '../systemTools/analytics';\nimport { isSystemWin } from '../utils';\n\nlet keepRNVRunning = false;\n\n// ##########################################\n// PUBLIC API\n// ##########################################\n\n\nexport const rnvStart = async (c) => {\n    const { platform } = c;\n    const { port } = c.runtime;\n    const { hosted } = c.program;\n\n    logTask(`rnvStart:${platform}:${port}:${hosted}:${Config.isWebHostEnabled}`);\n\n    if (Config.isWebHostEnabled && hosted) {\n        waitForWebpack(c, port)\n            .then(() => open(`http://${c.runtime.localhost}:${port}/`))\n            .catch(logError);\n    }\n\n    switch (platform) {\n        case MACOS:\n        case WINDOWS:\n            await configureIfRequired(c, platform);\n            return runElectronDevServer(c, platform, port);\n\n        case WEB:\n        case TIZEN:\n        case WEBOS:\n        case TIZEN_MOBILE:\n        case TIZEN_WATCH:\n            await configureIfRequired(c, platform);\n            return runWeb(c, platform, port);\n        default:\n            if (hosted) {\n                return logError('This platform does not support hosted mode', true);\n            }\n    }\n\n    let startCmd = `node ./node_modules/react-native/local-cli/cli.js start --sourceExts ${getSourceExts(c).join(',')} --port ${c.runtime.port} --config=metro.config.js`;\n    if (c.program.reset) {\n        startCmd += ' --reset-cache';\n    }\n\n    await executeAsync(c, startCmd, { stdio: 'inherit', silent: true });\n};\n\nconst runWeinre = c => executeAsync(c, 'npx weinre --boundHost -all-');\n\nexport const rnvDebug = async (c) => {\n    logTask(`rnvDebug:${c.platform}`);\n\n    await isPlatformSupported(c);\n    await isBuildSchemeSupported(c);\n    await runWeinre(c);\n};\n\n\nexport const rnvRun = async (c) => {\n    logTask(`rnvRun:${c.platform}`);\n\n    await isPlatformSupported(c);\n    await isBuildSchemeSupported(c);\n    await _rnvRunWithPlatform(c);\n};\n\nexport const rnvPackage = async (c) => {\n    logTask(`rnvPackage:${c.platform}`);\n\n    await isPlatformSupported(c);\n    await isBuildSchemeSupported(c);\n    await _rnvPackageWithPlatform(c);\n};\n\nexport const rnvBuild = async (c) => {\n    logTask(`rnvBuild:${c.platform}`);\n\n    await isPlatformSupported(c);\n    await isBuildSchemeSupported(c);\n    await _rnvBuildWithPlatform(c);\n};\n\nexport const rnvExport = async (c) => {\n    logTask(`rnvExport:${c.platform}`);\n\n    await isPlatformSupported(c);\n    await isBuildSchemeSupported(c);\n    await _rnvExportWithPlatform(c);\n};\n\nexport const rnvDeploy = async (c) => {\n    logTask(`rnvDeploy:${c.platform}`);\n\n    await isPlatformSupported(c);\n    await isBuildSchemeSupported(c);\n    await _rnvDeployWithPlatform(c);\n};\n\nexport const rnvLog = async (c) => {\n    switch (c.platform) {\n        case ANDROID:\n        case ANDROID_TV:\n        case ANDROID_WEAR:\n            await runAndroidLog(c);\n            return;\n        case IOS:\n        case TVOS:\n            await runAppleLog(c);\n            return;\n    }\n\n    logErrorPlatform(c, c.platform);\n};\n\n// ##########################################\n// PRIVATE\n// ##########################################\n\n\nconst _configureHostedIfRequired = async (c) => {\n    logTask(`_configureHostedIfRequired:${c.platform}`);\n    if (Config.isWebHostEnabled) {\n        logDebug('Running hosted build');\n        const { project, rnv } = c.paths;\n        copyFolderContentsRecursiveSync(path.join(rnv.dir, 'supportFiles', 'appShell'), path.join(project.dir, 'platformBuilds', `${c.runtime.appId}_${c.platform}`, 'public'));\n        writeCleanFile(path.join(rnv.dir, 'supportFiles', 'appShell', 'index.html'), path.join(project.dir, 'platformBuilds', `${c.runtime.appId}_${c.platform}`, 'public', 'index.html'), [\n            { pattern: '{{DEV_SERVER}}', override: `http://${ip.address()}:${c.runtime.port}` },\n        ]);\n    }\n};\n\nconst _startBundlerIfRequired = async (c) => {\n    logTask(`_startBundlerIfRequired:${c.platform}`);\n    const bundleAssets = getConfigProp(c, c.platform, 'bundleAssets');\n    if (bundleAssets === true) return;\n\n    const isRunning = await isBundlerActive(c);\n    if (!isRunning) {\n        rnvStart(c);\n        keepRNVRunning = true;\n        await waitForBundler(c);\n    } else {\n        await confirmActiveBundler(c);\n    }\n};\n\nconst waitForBundlerIfRequired = async (c) => {\n    const bundleAssets = getConfigProp(c, c.platform, 'bundleAssets');\n    if (bundleAssets === true) return;\n    // return a new promise that does...nothing, just to keep RNV running while the bundler is running\n    if (keepRNVRunning) return new Promise(() => {});\n    return true;\n};\n\nconst _rnvRunWithPlatform = async (c) => {\n    logTask(`_rnvRunWithPlatform:${c.platform}`);\n    const { platform } = c;\n    const { port } = c.runtime;\n    const { target } = c.runtime;\n    const { hosted } = c.program;\n\n    logTask(`_rnvRunWithPlatform:${platform}:${port}:${target}:${hosted}`, chalk.grey);\n\n    if (Config.isWebHostEnabled && hosted) {\n        c.runtime.shouldOpenBrowser = true;\n        return rnvStart(c);\n    }\n\n    Analytics.captureEvent({\n        type: 'runProject',\n        platform,\n    });\n\n    await checkSdk(c);\n\n    switch (platform) {\n        case IOS:\n        case TVOS:\n            if (!c.program.only) {\n                await cleanPlatformIfRequired(c, platform);\n                await configureIfRequired(c, platform);\n                await _startBundlerIfRequired(c);\n                await runXcodeProject(c);\n                return waitForBundlerIfRequired(c);\n            }\n            return runXcodeProject(c);\n        case ANDROID:\n        case ANDROID_TV:\n        case ANDROID_WEAR:\n            if (!c.program.only) {\n                await cleanPlatformIfRequired(c, platform);\n                await configureIfRequired(c, platform);\n                await _startBundlerIfRequired(c);\n                if (getConfigProp(c, platform, 'bundleAssets') === true || platform === ANDROID_WEAR) {\n                    await packageAndroid(c, platform);\n                }\n                await runAndroid(c, platform, target);\n                return waitForBundlerIfRequired(c);\n            }\n            return runAndroid(c, platform, target);\n        case MACOS:\n        case WINDOWS:\n            if (!c.program.only) {\n                await cleanPlatformIfRequired(c, platform);\n                await configureIfRequired(c, platform);\n            }\n            return runElectron(c, platform, port);\n        case WEB:\n            if (!c.program.only) {\n                await cleanPlatformIfRequired(c, platform);\n                await configureIfRequired(c, platform);\n            }\n            c.runtime.shouldOpenBrowser = true;\n            return runWeb(c, platform, port, true);\n        case TIZEN:\n        case TIZEN_MOBILE:\n        case TIZEN_WATCH:\n            if (!c.program.only) {\n                await cleanPlatformIfRequired(c, platform);\n                await configureIfRequired(c, platform);\n                await _configureHostedIfRequired(c);\n            }\n            return runTizen(c, platform, target);\n        case WEBOS:\n            if (!c.program.only) {\n                await cleanPlatformIfRequired(c, platform);\n                await configureIfRequired(c, platform);\n                await _configureHostedIfRequired(c);\n            }\n            return runWebOS(c, platform, target);\n        case KAIOS:\n        case FIREFOX_OS:\n        case FIREFOX_TV:\n            if (!c.program.only) {\n                await cleanPlatformIfRequired(c, platform);\n                await configureIfRequired(c, platform);\n            }\n            return runFirefoxProject(c, platform);\n        default:\n            return logErrorPlatform(c, platform);\n    }\n};\n\nconst _rnvPackageWithPlatform = async (c) => {\n    logTask(`_rnvPackageWithPlatform:${c.platform}`);\n    const { platform } = c;\n\n    const target = c.program.target || c.files.workspace.config.defaultTargets[platform];\n\n    await checkSdk(c);\n\n    switch (platform) {\n        case IOS:\n        case TVOS:\n            if (!c.program.only) {\n                await cleanPlatformIfRequired(c, platform);\n                await configureIfRequired(c, platform);\n            }\n            return packageBundleForXcode(c, platform);\n        case ANDROID:\n        case ANDROID_TV:\n        case ANDROID_WEAR:\n\n            if (!c.program.only) {\n                await cleanPlatformIfRequired(c, platform);\n                await configureIfRequired(c, platform);\n                await configureGradleProject(c, platform);\n            }\n            return packageAndroid(c, platform, target, platform === ANDROID_WEAR);\n        default:\n            logErrorPlatform(c, platform);\n            return false;\n    }\n};\n\nconst _rnvExportWithPlatform = async (c) => {\n    logTask(`_rnvExportWithPlatform:${c.platform}`);\n    const { platform } = c;\n    switch (platform) {\n        case WEB:\n            if (!c.program.only) {\n                await rnvBuild(c);\n            }\n            return exportWeb(c, platform);\n        case IOS:\n        case TVOS:\n            if (!c.program.only) {\n                await _rnvBuildWithPlatform(c, platform);\n            }\n            return exportXcodeProject(c, platform);\n        case ANDROID:\n        case ANDROID_TV:\n        case ANDROID_WEAR:\n            return _rnvBuildWithPlatform(c);\n        case MACOS:\n        case WINDOWS:\n            if (!c.program.only) {\n                await cleanPlatformIfRequired(c, platform);\n                await configureIfRequired(c, platform);\n                await configureElectronProject(c, platform);\n                await buildElectron(c, platform);\n            }\n            return exportElectron(c, platform);\n        default:\n            logErrorPlatform(c, platform);\n    }\n};\n\nconst _rnvDeployWithPlatform = async (c) => {\n    logTask(`_rnvDeployWithPlatform:${c.platform}`);\n    const { platform } = c;\n\n    switch (platform) {\n        case WEB:\n            if (!c.program.only) {\n                await rnvBuild(c);\n            }\n            return deployWeb(c, platform);\n        case TVOS:\n        case IOS:\n            if (!c.program.only) {\n                return _rnvExportWithPlatform(c);\n            }\n            return;\n        // case WEBOS:\n        case TIZEN:\n            if (!c.program.only) {\n                await rnvBuild(c);\n            }\n            return;\n        case ANDROID_TV:\n        case ANDROID:\n            if (!c.program.only) {\n                return _rnvBuildWithPlatform(c);\n            }\n            return;\n        default:\n            logErrorPlatform(c, platform);\n    }\n};\n\nconst _rnvBuildWithPlatform = async (c) => {\n    logTask(`_rnvBuildWithPlatform:${c.platform}`);\n    const { platform } = c;\n\n    switch (platform) {\n        case ANDROID:\n        case ANDROID_TV:\n        case ANDROID_WEAR:\n            await cleanPlatformIfRequired(c, platform);\n            await configureIfRequired(c, platform);\n            await configureGradleProject(c, platform);\n            await packageAndroid(c, platform);\n            await buildAndroid(c, platform);\n            return;\n        case MACOS:\n        case WINDOWS:\n            await cleanPlatformIfRequired(c, platform);\n            await configureIfRequired(c, platform);\n            await configureElectronProject(c, platform);\n            await buildElectron(c, platform);\n            return;\n        case IOS:\n        case TVOS:\n            if (!c.program.only) {\n                await _rnvPackageWithPlatform(c, platform);\n            }\n            await archiveXcodeProject(c, platform);\n            return;\n        case WEB:\n            await cleanPlatformIfRequired(c, platform);\n            await configureIfRequired(c, platform);\n            await buildWeb(c, platform);\n            return;\n        case KAIOS:\n        case FIREFOX_OS:\n        case FIREFOX_TV:\n            await cleanPlatformIfRequired(c, platform);\n            await configureIfRequired(c, platform);\n            await buildFirefoxProject(c, platform);\n            return;\n        case TIZEN:\n        case TIZEN_MOBILE:\n        case TIZEN_WATCH:\n            await cleanPlatformIfRequired(c, platform);\n            await configureIfRequired(c, platform);\n            await buildTizenProject(c, platform);\n            return;\n        case WEBOS:\n            await cleanPlatformIfRequired(c, platform);\n            await configureIfRequired(c, platform);\n            await buildWebOSProject(c, platform);\n            return;\n        default:\n            logErrorPlatform(c, platform);\n    }\n};\n"],"file":"runner.js"}