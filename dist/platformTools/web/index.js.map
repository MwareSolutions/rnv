{"version":3,"file":"index.js","names":["_generateWebpackConfigs","c","platform","appFolder","getAppFolder","templateFolder","getAppTemplateFolder","plugins","buildConfig","modulePaths","moduleAliasesString","moduleAliases","key","plugin","getMergedPlugin","webpack","push","concat","projectPath","aKey","env","getConfigProp","extendConfig","entryFile","title","getAppTitle","analyzer","program","copyFileSync","path","join","obj","extensions","getSourceExts","extendJs","JSON","stringify","fs","writeFileSync","buildWeb","Promise","resolve","reject","debug","debugIp","logTask","debugVariables","logInfo","ip","address","wbp","resolveNodeModulePath","executeAsync","runtime","appId","then","logSuccess","chalk","white","catch","e","configureWebProject","isPlatformActive","copyAssetsFolder","configureCoreWebProject","copyBuildsFolder","_parseCssSync","stringsPath","writeCleanFile","getBuildFilePath","pattern","override","sanitizeColor","hex","runWeb","port","devServerHost","localhost","WEB","getValidLocalhost","checkPortInUse","isPortActive","_runWebBrowser","runWebDevServer","confirmActiveBundler","alreadyStarted","shouldOpenBrowser","wait","waitForWebpack","open","logWarning","wpPublic","wpConfig","command","stdio","silent","logDebug","deployWeb","selectWebToolAndDeploy","exportWeb","selectWebToolAndExport"],"sources":["../../../src/platformTools/web/index.js"],"sourcesContent":["/* eslint-disable import/no-cycle */\nimport path from 'path';\nimport fs from 'fs';\nimport chalk from 'chalk';\nimport open from 'better-opn';\nimport ip from 'ip';\nimport { executeAsync } from '../../systemTools/exec';\nimport {\n    getAppFolder,\n    getAppTemplateFolder,\n    checkPortInUse,\n    resolveNodeModulePath,\n    getConfigProp,\n    waitForWebpack,\n    writeCleanFile,\n    getBuildFilePath,\n    getAppTitle,\n    getSourceExts,\n    sanitizeColor,\n    confirmActiveBundler\n} from '../../common';\nimport { isPlatformActive } from '..';\nimport { logTask, logInfo, logDebug, logSuccess, logWarning } from '../../systemTools/logger';\nimport { WEB } from '../../constants';\nimport { copyBuildsFolder, copyAssetsFolder } from '../../projectTools/projectParser';\nimport { copyFileSync } from '../../systemTools/fileutils';\nimport { getMergedPlugin } from '../../pluginTools';\nimport { selectWebToolAndDeploy, selectWebToolAndExport } from '../../deployTools/webTools';\nimport { getValidLocalhost } from '../../utils';\n\nconst _generateWebpackConfigs = (c, platform) => {\n    const appFolder = getAppFolder(c, platform);\n    const templateFolder = getAppTemplateFolder(c, platform);\n\n    const { plugins } = c.buildConfig;\n    let modulePaths = [];\n    let moduleAliasesString = '';\n    const moduleAliases = {};\n\n    for (const key in plugins) {\n        const plugin = getMergedPlugin(c, key, plugins);\n        if (!plugin) {\n\n        } else if (plugin.webpack) {\n            if (plugin.webpack.modulePaths) {\n                if (plugin.webpack.modulePaths === true) {\n                    modulePaths.push(`node_modules/${key}`);\n                } else {\n                    modulePaths = modulePaths.concat(plugin.webpack.modulePaths);\n                }\n            }\n            if (plugin.webpack.moduleAliases) {\n                if (plugin.webpack.moduleAliases === true) {\n                    moduleAliasesString += `'${key}': {\n                  projectPath: 'node_modules/${key}'\n                },`;\n                    moduleAliases[key] = { projectPath: `node_modules/${key}` };\n                } else {\n                    for (const aKey in plugin.webpack.moduleAliases) {\n                        if (typeof plugin.webpack.moduleAliases[aKey] === 'string') {\n                            moduleAliasesString += `'${aKey}': '${plugin.webpack.moduleAliases[aKey]}',`;\n                            moduleAliases[key] = plugin.webpack.moduleAliases[aKey];\n                        } else {\n                            moduleAliasesString += `'${aKey}': {projectPath: '${plugin.webpack.moduleAliases[aKey].projectPath}'},`;\n                            if (plugin.webpack.moduleAliases[aKey].projectPath) {\n                                moduleAliases[key] = { projectPath: plugin.webpack.moduleAliases[aKey].projectPath };\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    const env = getConfigProp(c, platform, 'environment');\n    const extendConfig = getConfigProp(c, platform, 'webpackConfig', {});\n    const entryFile = getConfigProp(c, platform, 'entryFile', 'index.web');\n    const title = getAppTitle(c, platform);\n    const analyzer = getConfigProp(c, platform, 'analyzer') || c.program.analyzer;\n\n    copyFileSync(\n        path.join(templateFolder, '_privateConfig', env === 'production' ? 'webpack.config.js' : 'webpack.config.dev.js'),\n        path.join(appFolder, 'webpack.config.js')\n    );\n\n    const obj = {\n        modulePaths,\n        moduleAliases,\n        analyzer,\n        entryFile,\n        title,\n        extensions: getSourceExts(c),\n        ...extendConfig\n    };\n\n    const extendJs = `\n    module.exports = ${JSON.stringify(obj, null, 2)}`;\n\n    fs.writeFileSync(path.join(appFolder, 'webpack.extend.js'), extendJs);\n};\n\nconst buildWeb = (c, platform) => new Promise((resolve, reject) => {\n    const { debug, debugIp } = c.program;\n    logTask(`buildWeb:${platform}`);\n\n    const appFolder = getAppFolder(c, platform);\n\n    let debugVariables = '';\n\n    if (debug) {\n        logInfo(`Starting a remote debugger build with ip ${debugIp || ip.address()}. If this IP is not correct, you can always override it with --debugIp`);\n        debugVariables += `DEBUG=true DEBUG_IP=${debugIp || ip.address()}`;\n    }\n\n    const wbp = resolveNodeModulePath(c, 'webpack/bin/webpack.js');\n\n    executeAsync(c, `npx cross-env PLATFORM=${platform} NODE_ENV=production ${debugVariables} node ${wbp} -p --config ./platformBuilds/${c.runtime.appId}_${platform}/webpack.config.js`)\n        .then(() => {\n            logSuccess(`Your Build is located in ${chalk.white(path.join(appFolder, 'public'))} .`);\n            resolve();\n        })\n        .catch(e => reject(e));\n});\n\nconst configureWebProject = async (c, platform) => {\n    logTask(`configureWebProject:${platform}`);\n\n    if (!isPlatformActive(c, platform)) return;\n\n    await copyAssetsFolder(c, platform);\n\n    await configureCoreWebProject(c, platform);\n\n    return copyBuildsFolder(c, platform);\n};\n\nexport const configureCoreWebProject = async (c, platform) => {\n    _generateWebpackConfigs(c, platform);\n    _parseCssSync(c, platform);\n};\n\nconst _parseCssSync = (c, platform) => {\n    const appFolder = getAppFolder(c, platform);\n    const stringsPath = 'public/app.css';\n    writeCleanFile(getBuildFilePath(c, platform, stringsPath), path.join(appFolder, stringsPath), [\n        { pattern: '{{PLUGIN_COLORS_BG}}', override: sanitizeColor(getConfigProp(c, platform, 'backgroundColor')).hex },\n    ]);\n};\n\nconst runWeb = async (c, platform, port) => {\n    logTask(`runWeb:${platform}:${port}`);\n\n    let devServerHost = c.runtime.localhost;\n\n    if (platform === WEB) {\n        const extendConfig = getConfigProp(c, c.platform, 'webpackConfig', {});\n        devServerHost = getValidLocalhost(extendConfig.devServerHost, c.runtime.localhost);\n    }\n\n    const isPortActive = await checkPortInUse(c, platform, port);\n\n    if (!isPortActive) {\n        logInfo(\n            `Looks like your ${chalk.white(platform)} devServerHost ${chalk.white(devServerHost)} at port ${chalk.white(\n                port\n            )} is not running. Starting it up for you...`\n        );\n        await _runWebBrowser(c, platform, devServerHost, port, false);\n        await runWebDevServer(c, platform, port);\n    } else {\n        await confirmActiveBundler(c);\n        await _runWebBrowser(c, platform, devServerHost, port, true);\n    }\n};\n\nconst _runWebBrowser = (c, platform, devServerHost, port, alreadyStarted) => new Promise((resolve) => {\n    logTask(`_runWebBrowser:${platform}:${devServerHost}:${port}:${c.runtime.shouldOpenBrowser}`);\n    if (!c.runtime.shouldOpenBrowser) return resolve();\n    const wait = waitForWebpack(c, port)\n        .then(() => {\n            open(`http://${devServerHost}:${port}/`);\n        })\n        .catch((e) => {\n            logWarning(e);\n        });\n    if (alreadyStarted) return wait; // if it's already started, return the promise so it rnv will wait, otherwise it will exit before opening the browser\n    return resolve();\n});\n\nconst runWebDevServer = (c, platform, port) => new Promise((resolve, reject) => {\n    logTask(`runWebDevServer:${platform}`);\n    const { debug, debugIp } = c.program;\n\n    const appFolder = getAppFolder(c, platform);\n    const wpPublic = path.join(appFolder, 'public');\n    const wpConfig = path.join(appFolder, 'webpack.config.js');\n\n    let debugVariables = '';\n\n    if (debug) {\n        logInfo(`Starting a remote debugger build with ip ${debugIp || ip.address()}. If this IP is not correct, you can always override it with --debugIp`);\n        debugVariables += `DEBUG=true DEBUG_IP=${debugIp || ip.address()}`;\n    }\n\n    const command = `npx cross-env PLATFORM=${platform} ${debugVariables} webpack-dev-server -d --devtool source-map --config ${wpConfig}  --inline --hot --colors --content-base ${wpPublic} --history-api-fallback --port ${port} --mode=development --https`;\n    executeAsync(c, command, { stdio: 'inherit', silent: true })\n        .then(() => {\n            logDebug('runWebDevServer: running');\n            resolve();\n        })\n        .catch((e) => {\n            logDebug(e);\n            resolve();\n        });\n});\n\nconst deployWeb = (c, platform) => {\n    logTask(`deployWeb:${platform}`);\n    return selectWebToolAndDeploy(c, platform);\n};\n\nconst exportWeb = (c, platform) => {\n    logTask(`exportWeb:${platform}`);\n    return selectWebToolAndExport(c, platform);\n};\n\nexport { buildWeb, runWeb, configureWebProject, deployWeb, exportWeb };\n"],"mappings":"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"}