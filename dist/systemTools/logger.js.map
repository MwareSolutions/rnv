{"version":3,"file":"logger.js","names":["_chalkCols","white","v","green","red","yellow","default","gray","grey","blue","magenta","_chalkMono","bold","chalk","_chalk","RNV_START","RNV","LINE","LINE2","logWelcome","str","_defaultColor","_c","files","rnv","package","version","rnvVersion","printIntoBox","includes","getCurrentCommand","timeStart","toLocaleString","printBoxEnd","console","log","_messages","_currentCommand","_currentProcess","_isInfoEnabled","_isMono","_highlightColor","configureLogger","c","process","command","subCommand","isInfoEnabled","Date","_currentSubCommand","program","mono","_updateDefaultColors","logAndSave","msg","skipLog","push","PRIVATE_PARAMS","excludeDollar","argArr","argv","slice","hideNext","output","map","join","dollar","logToSummary","logSummary","logContent","length","forEach","m","timeString","timeEnd","printBoxStart","project","name","buildConfig","_meta","currentAppConfigId","workspaceID","config","defaultProjectConfigs","defaults","supportedPlatforms","plats","generateOptions","i","obj","mapping","defaultVal","isEjected","paths","platformTemplatesDirs","platformTemplates","dir","printArrIntoBox","template","envString","platform","arch","versions","node","scheme","_msToTime","s","ms","secs","mins","hrs","setCurrentJob","job","logTask","task","customChalk","ch","postMsg","logWarning","logInfo","logDebug","args","apply","logComplete","isEnd","logEnd","logSuccess","logError","e","skipAnalytics","Analytics","captureException","message","stack","code","teardown","then","exit","logInitialize","logAppInfo","Promise","resolve","reject","id","str2","chalkIntend","endLine","intend","l","arr","prefix","stringArr","rnvStatus"],"sources":["../../src/systemTools/logger.js"],"sourcesContent":["import _chalk from 'chalk';\nimport { generateOptions } from './prompt';\nimport Analytics from './analytics';\n\nconst _chalkCols = {\n    white: v => v,\n    green: v => v,\n    red: v => v,\n    yellow: v => v,\n    default: v => v,\n    gray: v => v,\n    grey: v => v,\n    blue: v => v,\n    magenta: v => v,\n};\nconst _chalkMono = {\n    ..._chalkCols,\n    bold: _chalkCols\n};\n\nlet chalk = _chalk;\n\n\nconst RNV_START = '🚀 ReNative';\nlet RNV = 'ReNative';\nconst LINE = chalk.bold.white('----------------------------------------------------------');\nconst LINE2 = chalk.gray('----------------------------------------------------------');\n\n\nexport const logWelcome = () => {\n    let str = _defaultColor(`\n┌──────────────────────────────────────────────────────────────────────────────┐\n│                                                                              │\n│        ${chalk.red('██████╗')} ███████╗${chalk.red('███╗   ██╗')} █████╗ ████████╗██╗${chalk.red('██╗   ██╗')}███████╗       │\n│        ${chalk.red('██╔══██╗')}██╔════╝${chalk.red('████╗  ██║')}██╔══██╗╚══██╔══╝██║${chalk.red('██║   ██║')}██╔════╝       │\n│        ${chalk.red('██████╔╝')}█████╗  ${chalk.red('██╔██╗ ██║')}███████║   ██║   ██║${chalk.red('██║   ██║')}█████╗         │\n│        ${chalk.red('██╔══██╗')}██╔══╝  ${chalk.red('██║╚██╗██║')}██╔══██║   ██║   ██║${chalk.red('╚██╗ ██╔╝')}██╔══╝         │\n│        ${chalk.red('██║  ██║')}███████╗${chalk.red('██║ ╚████║')}██║  ██║   ██║   ██║${chalk.red(' ╚████╔╝ ')}███████╗       │\n│        ${chalk.red('╚═╝  ╚═╝')}╚══════╝${chalk.red('╚═╝  ╚═══╝')}╚═╝  ╚═╝   ╚═╝   ╚═╝${chalk.red('  ╚═══╝  ')}╚══════╝       │\n│                                                                              │\n`);\n\n    if (_c?.files?.rnv?.package?.version) {\n        _c.rnvVersion = _c.files.rnv.package.version;\n        str += printIntoBox(`      Version: ${chalk.green(_c.rnvVersion)}`, 1);\n        if (_c.rnvVersion.includes('alpha')) {\n            str += printIntoBox(`      ${chalk.yellow('WARNING: this is a prerelease version.')}`, 1);\n            str += printIntoBox(`      ${chalk.yellow('Use \"npm install rnv\" for stable one.')}`, 1);\n        }\n    }\n    str += printIntoBox(`      ${chalk.grey('https://renative.org')}`, 1);\n    str += printIntoBox(`      🚀 ${chalk.yellow('Firing up!...')}`, 1);\n    str += printIntoBox(`      ${getCurrentCommand()}`);\n    if (_c?.timeStart) str += printIntoBox(`      Start Time: ${_c.timeStart.toLocaleString()}`);\n    str += printIntoBox('');\n    str += printBoxEnd();\n    str += '\\n';\n\n    console.log(str);\n};\n\nlet _messages = [];\nlet _currentCommand;\nlet _currentProcess;\nlet _isInfoEnabled = false;\nlet _c;\nlet _isMono = false;\nlet _defaultColor;\nlet _highlightColor;\n\n\nexport const configureLogger = (c, process, command, subCommand, isInfoEnabled) => {\n    _messages = [];\n    _c = c;\n    _c.timeStart = new Date();\n    _currentProcess = process;\n    _currentCommand = command;\n    _currentSubCommand = subCommand;\n    _isInfoEnabled = isInfoEnabled;\n    _isMono = c.program.mono;\n    if (_isMono) {\n        chalk = _chalkMono;\n    }\n    _updateDefaultColors();\n    RNV = getCurrentCommand();\n};\n\nconst _updateDefaultColors = () => {\n    _defaultColor = chalk.gray;\n    _highlightColor = chalk.green;\n};\n_updateDefaultColors();\n\nexport const logAndSave = (msg, skipLog) => {\n    if (_messages && !_messages.includes(msg)) _messages.push(msg);\n    if (!skipLog) console.log(`${msg}`);\n};\n\nconst PRIVATE_PARAMS = ['-k', '--key'];\n\nexport const getCurrentCommand = (excludeDollar = false) => {\n    if (!_c) return '_c is undefined';\n    const argArr = _c.process.argv.slice(2);\n    let hideNext = false;\n    const output = argArr.map((v) => {\n        if (hideNext) {\n            hideNext = false;\n            return '********';\n        }\n        if (PRIVATE_PARAMS.includes(v)) {\n            hideNext = true;\n        }\n\n        return v;\n    }).join(' ');\n    const dollar = excludeDollar ? '' : '$ ';\n    return `${dollar}rnv ${output}`;\n};\n\nexport const logToSummary = (v) => {\n    _messages.push(`\\n${v}`);\n};\n\nexport const logSummary = () => {\n    let logContent = printIntoBox('All good as 🦄 ');\n    if (_messages && _messages.length) {\n        logContent = '';\n        _messages.forEach((m) => {\n            logContent += `│ ${m}\\n`;\n        });\n    }\n\n\n    let timeString = '';\n    if (_c) {\n        _c.timeEnd = new Date();\n        timeString = `| ${_c.timeEnd.toLocaleString()}`;\n    }\n\n    let str = printBoxStart(`🚀  SUMMARY ${timeString}`, getCurrentCommand());\n    if (_c) {\n        if (_c.files.project.package) {\n            str += printIntoBox(`Project Name: ${_highlightColor(_c.files.project.package.name)}`, 1);\n            str += printIntoBox(`Project Version: ${_highlightColor(_c.files.project.package.version)}`, 1);\n        }\n        if (_c.buildConfig?._meta?.currentAppConfigId) {\n            str += printIntoBox(`App Config: ${_highlightColor(_c.buildConfig._meta?.currentAppConfigId)}`, 1);\n        }\n        if (_c.buildConfig?.workspaceID) {\n            str += printIntoBox(`Workspace: ${_highlightColor(_c.buildConfig.workspaceID)}`, 1);\n        }\n        if (_c.files.project.config) {\n            const defaultProjectConfigs = _c.files.project.config.defaults;\n            if (defaultProjectConfigs?.supportedPlatforms) {\n                const plats = [];\n                generateOptions(_c.buildConfig?.defaults?.supportedPlatforms, true, null, (i, obj, mapping, defaultVal) => {\n                    let isEjected = '';\n                    if (_c.paths.project.platformTemplatesDirs) {\n                        isEjected = _c.paths.project.platformTemplatesDirs[obj].includes(_c.paths.rnv.platformTemplates.dir) ? '' : '(ejected)';\n                    }\n\n                    plats.push(`${defaultVal}${isEjected}`);\n                });\n                str += printArrIntoBox(plats, 'Supported Platforms: ');\n            }\n            if (defaultProjectConfigs?.template) {\n                str += printIntoBox(`Master Template: ${_highlightColor(defaultProjectConfigs.template)}`, 1);\n            }\n        }\n        if (_c.process) {\n            const envString = `${_c.process.platform} | ${_c.process.arch} | node v${_c.process.versions?.node} | rnv v${_c.rnvVersion}`;\n            str += printIntoBox(`Env Info: ${chalk.gray(envString)}`, 1);\n        }\n\n        if (_c.program.scheme) str += printIntoBox(`Build Scheme: ${_highlightColor(_c.program.scheme)}`, 1);\n        if (_c.platform) str += printIntoBox(`Platform: ${_highlightColor(_c.platform)}`, 1);\n        if (_c.timeEnd) {\n            str += printIntoBox(`Executed Time: ${chalk.yellow(_msToTime(_c.timeEnd - _c.timeStart))}`, 1);\n        }\n    }\n\n    str += printIntoBox('');\n    str += logContent;\n    str += printIntoBox('');\n    str += printBoxEnd();\n\n    console.log(str);\n};\n\nconst _msToTime = (s) => {\n    const ms = s % 1000;\n    s = (s - ms) / 1000;\n    const secs = s % 60;\n    s = (s - secs) / 60;\n    const mins = s % 60;\n    const hrs = (s - mins) / 60;\n\n    return `${hrs}h:${mins}m:${secs}s:${ms}ms`;\n};\n\nexport const setCurrentJob = (job) => {\n    _currentCommand = job;\n};\n\nexport const logTask = (task, customChalk) => {\n    const ch = customChalk || chalk.green;\n    const postMsg = customChalk ? '' : ' - Starting!';\n    console.log(ch(`${RNV} - ${task}${postMsg}`));\n};\n\nexport const logWarning = (msg) => {\n    logAndSave(chalk.yellow(`⚠️  ${RNV} - WARNING: ${msg}`));\n};\n\nexport const logInfo = (msg) => {\n    console.log(chalk.magenta(`ℹ️  ${RNV} - NOTE: ${msg}`));\n};\n\nexport const logDebug = (...args) => {\n    if (_isInfoEnabled) console.log.apply(null, args);\n};\n\nexport const isInfoEnabled = () => _isInfoEnabled;\n\nexport const logComplete = (isEnd = false) => {\n    console.log(chalk.bold.white(`\\n ${RNV} - Done! 🚀`));\n    if (isEnd) logEnd(0);\n};\n\nexport const logSuccess = (msg) => {\n    logAndSave(`✅ ${chalk.magenta(msg)}`);\n};\n\nexport const logError = (e, isEnd = false, skipAnalytics = false) => {\n    if (!skipAnalytics) {\n        Analytics.captureException(e);\n    }\n\n    if (e && e.message) {\n        logAndSave(chalk.bold.red(`🛑  ${RNV} - ERRROR! ${e.message}\\n${e.stack}`), isEnd);\n    } else {\n        logAndSave(chalk.bold.red(`🛑  ${RNV} - ERRROR! ${e}`), isEnd);\n    }\n\n    if (isEnd) logEnd(1);\n};\n\nexport const logEnd = (code) => {\n    logSummary();\n    if (_currentProcess) {\n        Analytics.teardown().then(() => {\n            _currentProcess.exit(code);\n        });\n    }\n};\n\n\nexport const logInitialize = () => {\n    logWelcome();\n    // console.log(\n    //     chalk.white(`\\n${LINE}\\n ${RNV_START} ${chalk.white.bold(`${_currentCommand} ${_currentSubCommand || ''}`)} is firing up! 🔥\\n${LINE}\\n`),\n    // );\n};\n\nexport const logAppInfo = c => new Promise((resolve, reject) => {\n    console.log(chalk.gray(`\\n${LINE2}\\nℹ️  Current App Config: ${chalk.bold.white(c.buildConfig.id)}\\n${LINE2}`));\n\n    resolve();\n});\n\nexport const printIntoBox = (str2, chalkIntend = 0) => {\n    let output = _defaultColor('│  ');\n    let endLine = '';\n    let intend;\n    if (_isMono) {\n        intend = 0;\n        chalkIntend = 0;\n    } else {\n        intend = str2 === '' ? 1 : 2;\n    }\n    for (let i = 0; i < chalkIntend + intend; i++) {\n        endLine += '          ';\n    }\n    endLine += '                                                                               │\\n';\n    output += _defaultColor(str2);\n    const l = output.length - endLine.length;\n    output += _defaultColor(endLine.slice(l));\n    return output;\n};\n\nexport const printArrIntoBox = (arr, prefix = '') => {\n    let output = '';\n    let stringArr = '';\n    let i = 0;\n    arr.forEach((v) => {\n        const l = i === 0 ? 60 - _defaultColor(prefix).length : 60;\n        if (stringArr.length > l) {\n            if (i === 0 && prefix.length) {\n                output += printIntoBox(`${_defaultColor(prefix)}${_defaultColor(stringArr)}`, 2);\n            } else {\n                output += printIntoBox(_defaultColor(stringArr), 1);\n            }\n\n            stringArr = '';\n            i++;\n        }\n        stringArr += `${v}, `;\n        // stringArr[i] += `${c.platformDefaults[v].icon} ${chalk.white(v)}, `;\n    });\n    if (i === 0 && prefix.length) {\n        output += printIntoBox(`${_defaultColor(prefix)}${_defaultColor(stringArr.slice(0, -2))}`, 2);\n    } else {\n        output += printIntoBox(_defaultColor(stringArr.slice(0, -2)), 1);\n    }\n\n    return output;\n};\n\nexport const printBoxStart = (str, str2) => {\n    let output = _defaultColor('┌──────────────────────────────────────────────────────────────────────────────┐\\n');\n    output += printIntoBox(str);\n    output += printIntoBox(str2 || '');\n    output += _defaultColor('├──────────────────────────────────────────────────────────────────────────────┤\\n');\n    return output;\n};\n\nexport const rnvStatus = async () => Promise.resolve();\n\nexport const printBoxEnd = () => _defaultColor('└──────────────────────────────────────────────────────────────────────────────┘');\n\nexport default {\n    logEnd,\n    logInfo,\n    logTask,\n    logError,\n    logDebug,\n    logAppInfo,\n    logWarning,\n    logSuccess,\n    logWelcome,\n    logComplete,\n    logInitialize\n};\n"],"mappings":"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"}