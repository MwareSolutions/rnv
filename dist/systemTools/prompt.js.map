{"version":3,"file":"prompt.js","names":["highlight","chalk","grey","bold","inquirerPrompt","params","c","Config","getConfig","msg","logMessage","warningMessage","message","program","ci","Error","logTask","logWarning","type","name","inquirer","prompt","result","generateOptions","inputData","isMultiChoice","mapping","renderMethod","asString","valuesAsObject","valuesAsArray","keysAsObject","keysAsArray","optionsAsArray","isArray","Array","output","renderer","_generateOptionString","map","v","i","rn","push","k","sort","_sort","a","b","aStr","bStr","toLowerCase","com","obj","defaultVal"],"sources":["../../src/systemTools/prompt.js"],"sourcesContent":["import chalk from 'chalk';\nimport inquirer from 'inquirer';\nimport { logWarning, logTask, rnvStatus, logEnd, logToSummary } from './logger';\nimport Config from '../config';\n\nconst highlight = chalk.grey.bold;\n\nexport const inquirerPrompt = async (params) => {\n    const c = Config.getConfig();\n    const msg = params.logMessage || params.warningMessage || params.message;\n    if (c.program.ci) {\n        throw new Error(`--ci option does not allow prompts: ${msg}`);\n    }\n    if (msg && params.logMessage) logTask(msg, chalk.grey);\n    if (msg && params.warningMessage) logWarning(msg);\n\n    // allow passing in just { type: 'prompt', ... } instead of { type: 'prompt', name: 'prompt', ... }\n    const { type, name } = params;\n    if (type === 'confirm' && !name) params.name = 'confirm';\n\n    const result = await inquirer.prompt(params);\n    return result;\n};\n\nexport const generateOptions = (inputData, isMultiChoice = false, mapping, renderMethod) => {\n    let asString = '';\n    const valuesAsObject = {};\n    const valuesAsArray = [];\n    const keysAsObject = {};\n    const keysAsArray = [];\n    const optionsAsArray = [];\n    const isArray = Array.isArray(inputData);\n\n    const output = {};\n    const renderer = renderMethod || _generateOptionString;\n    if (isArray) {\n        inputData.map((v, i) => {\n            const rn = renderer(i, v, mapping, v);\n            asString += rn;\n            optionsAsArray.push(rn);\n            valuesAsArray.push(v);\n            if (!mapping) keysAsArray.push(v);\n            if (!mapping) valuesAsObject[v] = v;\n        });\n    } else {\n        let i = 0;\n        for (const k in inputData) {\n            const v = inputData[k];\n            const rn = renderer(i, v, mapping, k);\n            asString += rn;\n            optionsAsArray.push(rn);\n            keysAsArray.push(k);\n            keysAsObject[k] = true;\n            valuesAsObject[k] = v;\n            valuesAsArray.push(v);\n            i++;\n        }\n    }\n    output.keysAsArray = keysAsArray.sort(_sort);\n    output.valuesAsArray = valuesAsArray.sort(_sort);\n    output.keysAsObject = keysAsObject;\n    output.valuesAsObject = valuesAsObject;\n    output.asString = asString;\n    output.optionsAsArray = optionsAsArray;\n    return output;\n};\n\nconst _sort = (a, b) => {\n    let aStr = '';\n    let bStr = '';\n    if (typeof a === 'string') {\n        // TODO: temp fix for weird issue when a/b are marked as string\n        // but toLowerCase() is undefined. need to investigate\n        aStr = a.toLowerCase ? a.toLowerCase() : a;\n        bStr = b.toLowerCase ? b.toLowerCase() : b;\n    } else {\n        if (a && a.name) aStr = a.name.toLowerCase();\n        if (b && b.name) bStr = b.name.toLowerCase();\n    }\n\n    let com = 0;\n    if (aStr > bStr) {\n        com = 1;\n    } else if (aStr < bStr) {\n        com = -1;\n    }\n    return com;\n};\n\nconst _generateOptionString = (i, obj, mapping, defaultVal) => ` [${highlight(i + 1)}]> ${highlight(mapping ? '' : defaultVal)} \\n`;\n"],"mappings":"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"}